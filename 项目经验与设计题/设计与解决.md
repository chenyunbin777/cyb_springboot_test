# 一 故障高可用解决方案
- 瞬时故障：是经过较短时间可以恢复的，可以多次重试。
- 临时故障高可用解决方案：
    - 临时服务器：正常情况下不会有数据处理，只有临时故障期间，才会参与服务的处理。
- 永久性故障高可用方案：
    - 系统启用备用服务器代替原来的永久失效的服务器，从其他正常的服务器复制数据。
    
    
    
# 秒杀设计分析
- 秒杀服务器单独部署：与其他非秒杀服务隔离，如果因为秒杀而导致的服务器失效宕机的话，也不会影响其他服务
- 秒杀商品界面静态化：将秒杀的商品信息，图片等内容静态化，全部写入一个静态页面，通过缓存来请求。
- 将秒杀页面缓存在CDN中，并且增加网络带宽
- 动态生成随机下单页面：活动开始时，才能得到下单页面。

## 架构设计
- 用户更关心的是如何快速刷新更快的进入下单界面，而不是商品信息等细节，所以界面设计尽可能简单即可。
- 秒杀开始：下单界面才变亮
- 信息默认不可修改：送货地址，付款方式都是默认，数量默认1 。
    - 只有第一个提交订单的推送给订单子系统
    - 其余用户看到秒杀结束

- 如何控制秒杀商品页面购买按钮的点亮
    - 
    
- 如何只允许第一个提交的发送到订单子系统
    - 服务集群，只接受少数用户。比如每台接受10个用户的下单请求
    - 检查server下单数，没到10个用户可以提交订单
    - 全局检查已提交订单数目
        - 超过：秒杀结束界面
        - 没超过：提交到订单子系统
        
#高并发访问数据库引发故障
- 1 首页调用了执行频率过高的sql，首页是访问频率最高的地方
    -处理办法：首页应该是静态 + 数据缓存的结构
- 2 不要滥用锁
    - synchronized(this)一定注意 不要RPC调用，有可能会很长时间不释放锁。
- 3 注意缓存的使用：不要 缓存击穿这种问题，导致大量的请求到数据库，造成瘫痪或者宕机

- 4 大文件读写导致 磁盘读写缓慢：使用分布式文件系统
- 5 访问线上数据服务要规范，不要在线上环境测试。
- 6 git提交要规范，避免漏或者错误提交。 使用diff查看提交的不同
- 7 null的判断很关键。