# 背景
wowcar商家端2.0上线后，只有基础的客户数据和订单数据，缺少基础的数据统计工具及销售管理工具。
每个销售，需要手工统计每天/每个阶段的作业成果，类似新增官方、新增自拓、风控通过等，
效率低下，且容易出错。门店管理层，需要线下与销售沟通，获取阶段性的统计结果。
提供日报/报表功能，可解放销售人力，预计100人/日，提高门店管理效率。

# 实现与难点
## 难点
- 我们如果整合分散的订单服务，风控服务，客户，跟进服务的数据来进行我们的统计工作呢？
- 实时数据统计
    - ODS（操作数据存储）层数据源来源于精卫平台通过canal采集弹个车直销业务相关的业务库表binlog。
    - 此层进行数据清洗过滤掉脏数据，实时数据中间存储在kafka中
    - 然后通过 FLINK SQL 来试试计算统计我们需要的数据到Mysql数据库中

- 离线任务：每晚，直接将我们HIVE表中每日统计过的数据，按照店铺和销售维度进行关联表join统计即可。

- 业务端：我们通过对于
    - report_offline_aggregation离线数据聚合表
    - report_realtime_aggregation 直销报表实时聚合表
    - 风控，成交订单，跟进，等离线和聚合表：用于一些风控 订单数据的去重
        - 解决办法：我们通过customerId来进行distinct 去重操作
        - 因为在统计风控通过客户数的时候：同一个客户customerId的客户再多加点通过风控只算一个
        - 不同销售跟进同一个客户，算一个跟进客户数
        

- 自我的价值：
    - 学习了flink sql与kafka的结合使用
    - 知道报表设计的过程
    - 帮助车商 店铺提高了管理效率      