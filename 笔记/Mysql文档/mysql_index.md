é›ªèŠ±ç®—æ³• UUID ç”Ÿæˆå”¯ä¸€ID

- explainç»Ÿè®¡ç´¢å¼•ä½¿ç”¨ä¿¡æ¯ï¼Œæ˜¯ä¸€ä¸ª**éšæœºé‡‡æ ·**çš„è¿‡ç¨‹ï¼Œå¹¶ä¸ä¸€å®šæ˜¯å‡†ç¡®çš„ã€‚ å¯ä»¥ä½¿ç”¨ mysql analyze table æ¥é‡æ–°ç»Ÿè®¡ç´¢å¼•ä¿¡æ¯
- æœ€å·¦åŸåˆ™å’Œè¦†ç›–ç´¢å¼•ï¼šæ¥è¿›è¡Œsqlä¼˜åŒ–
- 5.6ä¹‹åçš„ç´¢å¼•ä¸‹æ¨,
    - æ ¹æ®explainè§£æç»“æœå¯ä»¥çœ‹å‡ºExtraçš„å€¼ä¸ºUsing index conditionï¼Œè¡¨ç¤ºå·²ç»ä½¿ç”¨äº†ç´¢å¼•ä¸‹æ¨ã€‚
    - ï¼ˆnameï¼Œageï¼‰ è”åˆç´¢å¼•
    SELECT * from user where  name like 'é™ˆ%' and age=20 ï¼Œå¦‚æœæœ‰å¤šä¸ªå§“é™ˆçš„æ•°æ®ï¼Œåœ¨ç´¢å¼•çš„å†…éƒ¨è¿˜ä¼šæ ¹æ®age=20
    æ¥å†ç­›é€‰ä¸€éã€‚
- MVCC

- show profiles;
    - https://www.cnblogs.com/developer_chan/p/9231761.html 
    - æ˜¯mysqlæä¾›çš„å¯ä»¥ç”¨æ¥åˆ†æå½“å‰ä¼šè¯ä¸­sqlè¯­å¥æ‰§è¡Œçš„èµ„æºæ¶ˆè€—æƒ…å†µçš„å·¥å…·ï¼Œå¯ç”¨äºsqlè°ƒä¼˜çš„æµ‹é‡ã€‚é»˜è®¤æƒ…å†µä¸‹å¤„äºå…³é—­çŠ¶æ€ï¼Œå¹¶ä¿å­˜æœ€è¿‘15æ¬¡çš„è¿è¡Œç»“æœã€‚æŸ¥çœ‹sqlæ‰§è¡Œçš„æ—¶é—´
    - show profile cpu,block io for query 1;
        - å¯ä»¥æŸ¥çœ‹cpuï¼Œioå ç”¨çš„æ—¶é—´
        - BLOCK IOï¼šæ˜¾ç¤ºå—IOå¼€é”€ã€‚
        - CPUï¼šæ˜¾ç¤ºCPUå¼€é”€ä¿¡æ¯ã€‚
        - MEMORYï¼šæ˜¾ç¤ºå†…å­˜å¼€é”€ä¿¡æ¯ã€‚


Bæ ‘æ¯ä¸ªèŠ‚ç‚¹éƒ½ä¿å­˜çš„æ•°æ®ï¼Œb+æ ‘æ˜¯å¶å­èŠ‚ç‚¹ä¿å­˜çš„æ•°æ®ï¼Œè¿™æ ·æ ‘çš„é«˜åº¦å°±ä¼šå¾ˆä½ï¼ŒæŸ¥è¯¢æ•ˆç‡å°±ä¼šå¾ˆé«˜ï¼Œioæ¬¡æ•°è¾ƒå°‘ã€‚
é¡µç»“æ„å­˜å‚¨ï¼šéå¶å­èŠ‚ç‚¹ä¿å­˜çš„æ•°æ®æŒ‡é’ˆï¼Œå¶å­èŠ‚ç‚¹ä¿å­˜æ•°æ®ã€‚ ä¸€é¡µ16k
ç°‡ç´¢å¼•å’Œéèšç°‡ç´¢å¼•
https://my.oschina.net/xiaoyoung/blog/3046779
æ•°æ®ç»“æ„ï¼šB+æ ‘ğŸŒ²
- **å¹³è¡¡äºŒå‰æ ‘ï¼Œå¶å­èŠ‚ç‚¹å­˜æ”¾æ•°æ®ï¼ŒåŒå‘é“¾è¡¨ï¼Œç´¢å¼•èšè”Ÿæ˜¯æœ‰åºçš„åŒå‘é“¾è¡¨**

æ€»ç»“ï¼šInnoDBä¸­ï¼Œè¡¨æ•°æ®æ–‡ä»¶æœ¬èº«å°±æ˜¯æŒ‰B+Treeç»„ç»‡çš„ä¸€ä¸ªç´¢å¼•ç»“æ„

## 1 èšç°‡ç´¢å¼•  
- ï¼ˆ1ï¼‰èšç°‡ç´¢å¼•ï¼šå°±æ˜¯æŒ‰ç…§æ¯å¼ è¡¨çš„ä¸»é”®æ„é€ ä¸€é¢—B+æ ‘ï¼ŒåŒæ—¶å¶å­èŠ‚ç‚¹ä¸­å­˜æ”¾çš„å°±æ˜¯æ•´å¼ è¡¨çš„è¡Œè®°å½•æ•°æ®ï¼Œä¹Ÿå°†èšé›†ç´¢å¼•çš„å¶å­èŠ‚ç‚¹ç§°ä¸º"æ•°æ®é¡µ"ã€‚
è¿™ä¸ªç‰¹æ€§å†³å®šäº†ç´¢å¼•ç»„ç»‡è¡¨ä¸­æ•°æ®ä¹Ÿæ˜¯ç´¢å¼•çš„ä¸€éƒ¨åˆ†ï¼›
- ï¼ˆ2ï¼‰ä¸€èˆ¬å»ºè¡¨ä¼šç”¨ä¸€ä¸ª"è‡ªå¢ä¸»é”®"åšèšç°‡ç´¢å¼•ï¼Œæ²¡æœ‰çš„è¯MySQLä¼šé»˜è®¤åˆ›å»ºé€‰æ‹©ä¸€ä¸ªå”¯ä¸€ä¸”éç©ºçš„ç´¢å¼•æ›¿ä»£ï¼Œå¦‚æœæ²¡æœ‰è¿™æ ·çš„ç´¢å¼•ï¼ŒInnoDBä¼šéšå¼å®šä¹‰ä¸€ä¸ªä¸»é”®ï¼ˆç±»ä¼¼oracleä¸­çš„RowIdï¼‰æ¥ä½œä¸ºèšç°‡ç´¢å¼•ã€‚
    ä¸€ä¸ªè¡¨ä»…æœ‰ä¸€ä¸ªèšç°‡ç´¢å¼•ï¼Œä¸€èˆ¬éƒ½æ˜¯ä¸»é”®ç´¢å¼•ã€‚
- ï¼ˆ3ï¼‰**è¾…åŠ©ç´¢å¼•**ï¼šä¹Ÿæ˜¯ä¸€é¢—b+æ ‘ï¼Œä½†æ˜¯**å¶å­èŠ‚ç‚¹å­˜æ”¾çš„æ˜¯èšè”Ÿï¼ˆä¸»é”®ï¼‰ç´¢å¼•çš„å€¼**
æˆ‘ä»¬æ—¥å¸¸å·¥ä½œä¸­ï¼Œæ ¹æ®å®é™…æƒ…å†µè‡ªè¡Œæ·»åŠ çš„ç´¢å¼•éƒ½æ˜¯"è¾…åŠ©ç´¢å¼•"ï¼ˆéä¸»é”®ç´¢å¼•ï¼‰ï¼Œä¹Ÿç§°ä¸ºäºŒçº§ç´¢å¼•ï¼Œè¾…åŠ©ç´¢å¼•å°±æ˜¯ä¸€ä¸ªä¸ºäº†éœ€æ‰¾ä¸»é”®ç´¢å¼•çš„äºŒçº§ç´¢å¼•ï¼Œç°åœ¨æ‰¾åˆ°"ä¸»é”®ç´¢å¼•å€¼"å†é€šè¿‡ä¸»é”®ç´¢å¼•æ‰¾æ•°æ®ï¼›
    è¾…åŠ©ç´¢å¼•æ£€ç´¢æ•°æ®çš„è¿‡ç¨‹ï¼šç°åœ¨è¾…åŠ©ç´¢å¼•ä¸­æ£€ç´¢åˆ°å¯¹åº”çš„èšç°‡ç´¢å¼•çš„å€¼ï¼Œå†æ ¹æ®è¯¥ä¸»é”®å€¼æ£€ç´¢èšç°‡ç´¢å¼•è€Œæ‰¾åˆ°å¯¹åº”çš„B+ Treeçš„å¶å­èŠ‚ç‚¹ï¼Œä¹Ÿå°±æ‰¾åˆ°äº†å¯¹åº”çš„è¡Œæ•°æ®ã€‚
    ä¾‹å¦‚ï¼šuserè¡¨ idä¸»é”®ï¼Œnameå»ºç«‹æ™®é€šçš„ç´¢å¼•
    select * from user where name = 'cyb'
    æˆ‘ä»¬å…ˆé€šè¿‡è¾…åŠ©ç´¢å¼•nameæ¥åœ¨è¾…åŠ©ç´¢å¼•çš„B+treeä¸­æ£€ç´¢ï¼Œæ‰¾åˆ°å¯¹åº”çš„è¡Œçš„ä¸»é”®å€¼ï¼Œ
    ç„¶ååœ¨è·Ÿè¿›ä¸»é”®å€¼å»**èšè”Ÿç´¢å¼•çš„B+Treeä¸­æ£€ç´¢æ‰¾åˆ°å¯¹åº”çš„å¶å­èŠ‚ç‚¹ï¼Œä¹Ÿå°±æ‰¾åˆ°äº†å¯¹åº”çš„Mysqlçš„æ•°æ®è¡Œçš„å€¼**ã€‚


å†…å­˜

- ï¼ˆ4ï¼‰æ”¯æŒè¡Œé”
- ï¼ˆ5ï¼‰select count(*) from table ä¼šå…¨éƒ¨æ‰«æï¼Œä¸ä¼šç¼“å­˜

## 2 ä½¿ç”¨èšç°‡ç´¢å¼•çš„ä¼˜åŠ¿ï¼š
æ¯æ¬¡ä½¿ç”¨è¾…åŠ©ç´¢å¼•æ£€ç´¢éƒ½è¦ç»è¿‡ä¸¤æ¬¡B+æ ‘æŸ¥æ‰¾ï¼Œçœ‹ä¸Šå»èšç°‡ç´¢å¼•çš„æ•ˆç‡æ˜æ˜¾è¦ä½äºéèšç°‡ç´¢å¼•ï¼Œè¿™ä¸æ˜¯å¤šæ­¤ä¸€ä¸¾å—ï¼Ÿèšç°‡ç´¢å¼•çš„ä¼˜åŠ¿åœ¨å“ªï¼Ÿ
- ï¼ˆ1ï¼‰ç”±äºè¡Œæ•°æ®å’Œèšç°‡ç´¢å¼•çš„å¶å­èŠ‚ç‚¹å­˜å‚¨åœ¨ä¸€èµ·ï¼ŒåŒä¸€é¡µä¸­ä¼šæœ‰å¤šæ¡è¡Œæ•°æ®ï¼Œè®¿é—®åŒä¸€æ•°æ®é¡µä¸åŒè¡Œè®°å½•æ—¶ï¼Œå·²ç»æŠŠé¡µåŠ è½½åˆ°äº†Bufferä¸­ï¼ˆç¼“å­˜å™¨ï¼‰ï¼Œ
å†æ¬¡è®¿é—®æ—¶ï¼Œä¼šåœ¨å†…å­˜ä¸­å®Œæˆè®¿é—®ï¼Œä¸å¿…è®¿é—®ç£ç›˜ã€‚è¿™æ ·ä¸»é”®å’Œè¡Œæ•°æ®æ˜¯ä¸€èµ·è¢«è½½å…¥å†…å­˜çš„ï¼Œæ‰¾åˆ°å¶å­èŠ‚ç‚¹å°±å¯ä»¥ç«‹åˆ»å°†è¡Œæ•°æ®è¿”å›äº†ï¼Œ
å¦‚æœæŒ‰ç…§ä¸»é”®Idæ¥ç»„ç»‡æ•°æ®ï¼Œè·å¾—æ•°æ®æ›´å¿«ã€‚

- ï¼ˆ2ï¼‰è¾…åŠ©ç´¢å¼•çš„å¶å­èŠ‚ç‚¹ï¼Œå­˜å‚¨ä¸»é”®å€¼å’Œå¯¹åº”çš„åˆ—æ•°æ®ï¼Œè€Œä¸æ˜¯æ•°æ®çš„å­˜æ”¾åœ°å€ã€‚å¥½å¤„æ˜¯å½“è¡Œæ•°æ®æ”¾ç”Ÿå˜åŒ–æ—¶ï¼Œç´¢å¼•æ ‘çš„èŠ‚ç‚¹ä¹Ÿéœ€è¦åˆ†è£‚å˜åŒ–ï¼›æˆ–è€…æ˜¯æˆ‘ä»¬éœ€è¦æŸ¥æ‰¾çš„æ•°æ®ï¼Œ
åœ¨ä¸Šä¸€æ¬¡IOè¯»å†™çš„ç¼“å­˜ä¸­æ²¡æœ‰ï¼Œéœ€è¦å‘ç”Ÿä¸€æ¬¡æ–°çš„IOæ“ä½œæ—¶ï¼Œå¯ä»¥é¿å…å¯¹è¾…åŠ©ç´¢å¼•çš„ç»´æŠ¤å·¥ä½œï¼Œåªéœ€è¦ç»´æŠ¤èšç°‡ç´¢å¼•æ ‘å°±å¥½äº†ã€‚
å¦ä¸€ä¸ªå¥½å¤„æ˜¯ï¼Œå› ä¸ºè¾…åŠ©ç´¢å¼•å­˜æ”¾çš„æ˜¯ä¸»é”®å€¼ï¼Œå‡å°‘äº†è¾…åŠ©ç´¢å¼•å ç”¨çš„å­˜å‚¨ç©ºé—´å¤§å°ã€‚

> æ³¨ï¼šæˆ‘ä»¬çŸ¥é“ä¸€æ¬¡ioè¯»å†™ï¼Œå¯ä»¥è·å–åˆ°16Kå¤§å°çš„èµ„æºï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸ºè¯»å–åˆ°çš„æ•°æ®åŒºåŸŸä¸ºPageã€‚
è€Œæˆ‘ä»¬çš„Bæ ‘ï¼ŒB+æ ‘çš„ç´¢å¼•ç»“æ„ï¼Œå¶å­èŠ‚ç‚¹ä¸Šå­˜æ”¾å¥½å¤šä¸ªå…³é”®å­—ï¼ˆç´¢å¼•å€¼ï¼‰å’Œå¯¹åº”çš„æ•°æ®ï¼Œ
éƒ½ä¼šåœ¨ä¸€æ¬¡IOæ“ä½œä¸­è¢«è¯»å–åˆ°ç¼“å­˜ä¸­ï¼Œæ‰€ä»¥åœ¨è®¿é—®åŒä¸€ä¸ªé¡µä¸­çš„ä¸åŒè®°å½•æ—¶ï¼Œä¼šåœ¨å†…å­˜é‡Œæ“ä½œï¼Œ
è€Œä¸ç”¨å†æ¬¡è¿›è¡ŒIOæ“ä½œäº†ã€‚é™¤éå‘ç”Ÿäº†é¡µçš„åˆ†è£‚ï¼Œå³è¦æŸ¥è¯¢çš„è¡Œæ•°æ®ä¸åœ¨ä¸Šæ¬¡IOæ“ä½œçš„ç¼“å­˜é‡Œï¼Œæ‰ä¼šè§¦å‘æ–°çš„IOæ“ä½œã€‚
ï¼ˆ å‘ç”Ÿé¡µåˆ†è£‚çš„è¯ï¼Œb+treeä¼šé‡ç»„ï¼Œéœ€è¦é‡æ–°IOæ¥æŸ¥è¯¢ï¼‰

- ï¼ˆ3ï¼‰å› ä¸ºMyISAMçš„ä¸»ç´¢å¼•å¹¶éèšç°‡ç´¢å¼•ï¼Œé‚£ä¹ˆä»–çš„æ•°æ®çš„ç‰©ç†åœ°å€å¿…ç„¶æ˜¯å‡Œä¹±çš„ï¼Œæ‹¿åˆ°è¿™äº›ç‰©ç†åœ°å€ï¼ŒæŒ‰ç…§åˆé€‚çš„ç®—æ³•è¿›è¡ŒI/Oè¯»å–ï¼Œ
äºæ˜¯å¼€å§‹ä¸åœçš„å¯»é“ä¸åœçš„æ—‹è½¬ã€‚èšç°‡ç´¢å¼•åˆ™åªéœ€ä¸€æ¬¡I/Oã€‚ï¼ˆå¼ºçƒˆçš„å¯¹æ¯”ï¼‰

- ï¼ˆ4ï¼‰ä¸è¿‡ï¼Œå¦‚æœæ¶‰åŠåˆ°å¤§æ•°æ®é‡çš„æ’åºã€å…¨è¡¨æ‰«æã€countä¹‹ç±»çš„æ“ä½œçš„è¯ï¼Œè¿˜æ˜¯MyISAMå ä¼˜åŠ¿äº›ï¼Œå› ä¸ºç´¢å¼•æ‰€å ç©ºé—´å°ï¼Œè¿™äº›æ“ä½œæ˜¯éœ€è¦åœ¨å†…å­˜ä¸­å®Œæˆçš„ã€‚

## 3 innodbå’Œmyisamçš„åŒºåˆ«

- ï¼ˆ1ï¼‰InnoDBæ”¯æŒäº‹åŠ¡ï¼ŒMyISAMä¸æ”¯æŒï¼Œè¿™ä¸€ç‚¹æ˜¯éå¸¸ä¹‹é‡è¦ã€‚äº‹åŠ¡æ˜¯ä¸€ç§é«˜çº§çš„å¤„ç†æ–¹å¼ï¼Œå¦‚åœ¨ä¸€äº›åˆ—å¢åˆ æ”¹ä¸­åªè¦å“ªä¸ªå‡ºé”™è¿˜å¯ä»¥å›æ»šè¿˜åŸï¼Œè€ŒMyISAMå°±ä¸å¯ä»¥äº†ã€‚
- ï¼ˆ9ï¼‰InnoDBæ”¯æŒè¡Œé”ï¼Œè€ŒMyISAMæ”¯æŒè¡¨çº§é”
InnoDBçš„è¡Œé”æ˜¯å®ç°åœ¨ç´¢å¼•ä¸Šçš„ï¼Œè€Œä¸æ˜¯é”åœ¨ç‰©ç†è¡Œè®°å½•ä¸Šã€‚æ½œå°è¯æ˜¯ï¼Œå¦‚æœè®¿é—®æ²¡æœ‰å‘½ä¸­ç´¢å¼•ï¼Œä¹Ÿæ— æ³•ä½¿ç”¨è¡Œé”ï¼Œå°†è¦é€€åŒ–ä¸ºè¡¨é”ã€‚
å‘½ä¸­ç´¢å¼•ï¼šåŒ…æ‹¬ æ²¡æœ‰æŸ¥åˆ°æ•°æ®ï¼Œæˆ–è€…æŸ¥è¯¢çš„å­—æ®µæ²¡åŠ ç´¢å¼•
å¦‚ï¼šuserè¡¨ idä¸»é”®ï¼Œnameå»ºç«‹æ™®é€šçš„ç´¢å¼•ï¼Œage æ²¡æœ‰ç´¢å¼•
    select * from user where name = 'cyb' å¦‚æœæ²¡æœ‰æŸ¥åˆ°ï¼Œè¡¨é”ï¼›å¦‚æœæŸ¥åˆ°äº†ï¼Œè¡Œé”
    select * from user where age = 18 è¡¨é”ï¼Œå› ä¸ºageæ²¡æœ‰åŠ ç´¢å¼•

- ï¼ˆ2ï¼‰MyISAMé€‚åˆæŸ¥è¯¢ä»¥åŠæ’å…¥ä¸ºä¸»çš„åº”ç”¨ï¼ŒInnoDBé€‚åˆé¢‘ç¹ä¿®æ”¹ä»¥åŠæ¶‰åŠåˆ°å®‰å…¨æ€§è¾ƒé«˜çš„åº”ç”¨
- ï¼ˆ3ï¼‰InnoDBæ”¯æŒå¤–é”®ï¼ŒMyISAMä¸æ”¯æŒ
- ï¼ˆ4ï¼‰InnoDB select count(*) from table ä¼šå…¨éƒ¨æ‰«æï¼Œä¸ä¼šç¼“å­˜ï¼›è€ŒMyISAMç”¨ä¸€ä¸ªå˜é‡ä¿å­˜äº†æ•´ä¸ªè¡¨çš„è¡Œæ•°
- ï¼ˆ5ï¼‰InnoDBä¸æ”¯æŒFULLTEXTç±»å‹çš„ç´¢å¼•
- ï¼ˆ6ï¼‰InnoDBä¸­ä¸ä¿å­˜è¡¨çš„è¡Œæ•°ï¼Œå¦‚select count() from tableæ—¶ï¼ŒInnoDBéœ€è¦æ‰«æä¸€éæ•´ä¸ªè¡¨æ¥è®¡ç®—æœ‰å¤šå°‘è¡Œï¼Œä½†æ˜¯MyISAMåªè¦ç®€å•çš„è¯»å‡ºä¿å­˜å¥½çš„è¡Œæ•°å³å¯ã€‚æ³¨æ„çš„æ˜¯ï¼Œå½“count()è¯­å¥åŒ…å«whereæ¡ä»¶æ—¶MyISAMä¹Ÿéœ€è¦æ‰«ææ•´ä¸ªè¡¨
- ï¼ˆ7ï¼‰å¯¹äºè‡ªå¢é•¿çš„å­—æ®µï¼ŒInnoDBä¸­å¿…é¡»åŒ…å«åªæœ‰è¯¥å­—æ®µçš„ç´¢å¼•ï¼Œä½†æ˜¯åœ¨MyISAMè¡¨ä¸­å¯ä»¥å’Œå…¶ä»–å­—æ®µä¸€èµ·å»ºç«‹è”åˆç´¢å¼•
- ï¼ˆ8ï¼‰æ¸…ç©ºæ•´ä¸ªè¡¨æ—¶ï¼ŒInnoDBæ˜¯ä¸€è¡Œä¸€è¡Œçš„åˆ é™¤ï¼Œæ•ˆç‡éå¸¸æ…¢ã€‚MyISAMåˆ™ä¼šé‡å»ºè¡¨


# äºŒ ç´¢å¼•ä¼˜åŒ–
## 1 ç´¢å¼•è¦†ç›–ï¼š
- 1 æŸ¥è¯¢è¾…åŠ©ç´¢å¼•çš„åˆ—

- 2 ç»Ÿè®¡æ“ä½œ
æ˜¯æŒ‡ å¦‚æœæŸ¥è¯¢çš„åˆ—æ°å¥½æ˜¯ç´¢å¼•çš„ä¸€éƒ¨åˆ†ï¼Œé‚£ä¹ˆæŸ¥è¯¢åªéœ€è¦åœ¨ç´¢å¼•æ–‡ä»¶ä¸Šè¿›è¡Œï¼Œä¸éœ€è¦å›è¡Œåˆ°ç£ç›˜åœ¨æ‰¾æ•°æ®ã€‚
å¦‚æœå’Œæ•´ä¸ªè¡¨çš„æ•°æ®å·®ä¸å¤šï¼Œmysqlåˆ™è®¤ä¸ºå…¨è¡¨æ‰«æä»£ä»·æ›´å°
æ˜¯æŸ¥è¯¢çš„æ•°æ®å¤šäº†ä¹‹åï¼Œmysqlè®¤ä¸ºè¿˜æ˜¯ç´¢å¼•æŸ¥è¯¢æ›´å¿«ï¼Œæ‰€ä»¥ç”¨äº†ç´¢å¼•ã€‚
æ€»ç»“ï¼šmysqlä¼šè‡ªåŠ¨é€‰æ‹©æ¯”è¾ƒå¿«çš„æŸ¥è¯¢æ–¹å¼æ¥è¿›è¡ŒæŸ¥è¯¢ã€‚

## 2 æœ€å·¦å‰ç¼€åŸåˆ™
- æœ€å·¦å‰ç¼€ï¼šmysql ä¼šä¸€ç›´å‘å³åŒ¹é…ç›´åˆ°é‡åˆ°èŒƒå›´æŸ¥è¯¢ï¼ˆ>ã€<ã€between 1 and 3ã€likeï¼‰å°±åœæ­¢åŒ¹é…ã€‚èŒƒå›´åˆ—å¯ä»¥ç”¨åˆ°ç´¢å¼•ï¼Œä½†æ˜¯èŒƒå›´åˆ—åé¢çš„åˆ—æ— æ³•ç”¨åˆ°ç´¢å¼•ã€‚
åœ¨ MySQL ä¸­ï¼Œå¯ä»¥æŒ‡å®šå¤šä¸ªåˆ—ä¸ºç´¢å¼•ï¼Œå³è”åˆç´¢å¼•ã€‚
æ¯”å¦‚ index(nameï¼Œage) ï¼Œæœ€å·¦å‰ç¼€åŸåˆ™æ˜¯æŒ‡æŸ¥è¯¢æ—¶ç²¾ç¡®åŒ¹é…åˆ°ä»æœ€å·¦è¾¹å¼€å§‹çš„ä¸€åˆ—æˆ–å‡ åˆ—ï¼ˆnameï¼›name&ageï¼‰ï¼Œå°±å¯ä»¥å‘½ä¸­ç´¢å¼•ã€‚
å¦‚æœæ‰€æœ‰åˆ—éƒ½ç”¨åˆ°äº†ï¼Œé¡ºåºä¸åŒï¼ŒæŸ¥è¯¢å¼•æ“ä¼šè‡ªåŠ¨ä¼˜åŒ–ä¸ºåŒ¹é…è”åˆç´¢å¼•çš„é¡ºåºï¼Œè¿™æ ·æ˜¯èƒ½å¤Ÿå‘½ä¸­ç´¢å¼•çš„ã€‚
æ€»ç»“ï¼šmysqlä¼šå¯¹è”åˆç´¢å¼•è¿›è¡Œä¼˜åŒ–

## 3 ä¿®å¤ç©ºé—´ç¢ç‰‡
 [ËˆÉ‘ËptÉªmaÉªz] 
optimize table è¡¨å;

## 4 ä»€ä¹ˆæ ·çš„sqlä¸èµ°ç´¢å¼•
- ï¼ˆ1ï¼‰å¦‚æœæ¡ä»¶ä¸­æœ‰orï¼Œå³ä½¿å…¶ä¸­æœ‰æ¡ä»¶å¸¦ç´¢å¼•ä¹Ÿä¸ä¼šä½¿ç”¨ã€‚
- ï¼ˆ2ï¼‰æŸ¥è¯¢æ¡ä»¶å­—æ®µå‚ä¸äº†è¿ç®—ï¼šä¾‹å¦‚where id *1 , ä½¿ç”¨ + - * /
- ï¼ˆ3ï¼‰ä½¿ç”¨å‡½æ•°ï¼š'2020-12-03' = DATE_FORMAT(date_create,'%Y-%m-%d')
- ï¼ˆ4ï¼‰å­—ç¬¦ä¸²ä¸æ•°å­—æ¯”è¾ƒä¸ä½¿ç”¨ç´¢å¼•;
- like "%_" ç™¾åˆ†å·åœ¨æœ€å‰é¢ä¸èµ°

## 5 ç´¢å¼•çš„å¼Šç«¯
ä¸è¦ç›²ç›®çš„åˆ›å»ºç´¢å¼•ï¼Œåªä¸ºæŸ¥è¯¢æ“ä½œé¢‘ç¹çš„åˆ—åˆ›å»ºç´¢å¼•ï¼Œåˆ›å»ºç´¢å¼•ä¼šä½¿æŸ¥è¯¢æ“ä½œå˜å¾—æ›´åŠ å¿«é€Ÿï¼Œ
ä½†æ˜¯ä¼šé™ä½å¢åŠ ã€åˆ é™¤ã€æ›´æ–°æ“ä½œçš„é€Ÿåº¦ï¼Œå› ä¸ºæ‰§è¡Œè¿™äº›æ“ä½œçš„åŒæ—¶ä¼šå¯¹ç´¢å¼•æ–‡ä»¶è¿›è¡Œé‡æ–°æ’åºæˆ–æ›´æ–°ã€‚
ä½†æ˜¯ï¼Œåœ¨äº’è”ç½‘åº”ç”¨ä¸­ï¼ŒæŸ¥è¯¢çš„è¯­å¥è¿œè¿œå¤§äºDMLçš„è¯­å¥ï¼Œç”šè‡³å¯ä»¥å åˆ°80%~90%ï¼Œæ‰€ä»¥ä¹Ÿä¸è¦å¤ªåœ¨æ„ï¼Œåªæ˜¯åœ¨å¤§æ•°æ®å¯¼å…¥æ—¶ï¼Œå¯ä»¥å…ˆåˆ é™¤ç´¢å¼•ï¼Œå†æ‰¹é‡æ’å…¥æ•°æ®ï¼Œæœ€åå†æ·»åŠ ç´¢å¼•ã€‚
- å½“é¡µä¸­åˆ é™¤çš„è®°å½•è¾¾åˆ°MERGE_THRESHOLDï¼ˆé»˜è®¤é¡µä½“ç§¯çš„50%ï¼‰ï¼ŒInnoDBä¼šå¼€å§‹å¯»æ‰¾æœ€é è¿‘çš„é¡µï¼ˆå‰æˆ–åï¼‰çœ‹çœ‹æ˜¯å¦å¯ä»¥å°†ä¸¤ä¸ªé¡µåˆå¹¶ä»¥ä¼˜åŒ–ç©ºé—´ä½¿ç”¨ã€‚
### é¡µåˆ†è£‚
- ä½†æ˜¯å¦‚æœæ’å…¥çš„æ˜¯ä¸è§„åˆ™çš„æ•°æ®ï¼Œé‚£ä¹ˆæ¯æ¬¡æ’å…¥éƒ½ä¼šæ”¹å˜äºŒå‰æ ‘ä¹‹å‰çš„æ•°æ®çŠ¶æ€ã€‚ä»è€Œå¯¼è‡´äº†é¡µåˆ†è£‚ã€‚
## 6 limit ä¼˜åŒ–
https://www.jb51.net/article/31868.htm
åœ¨mysqlä¸­limitå¯ä»¥å®ç°å¿«é€Ÿåˆ†é¡µï¼Œä½†æ˜¯å¦‚æœæ•°æ®åˆ°äº†å‡ ç™¾ä¸‡æ—¶æˆ‘ä»¬çš„limitå¿…é¡»ä¼˜åŒ–æ‰èƒ½æœ‰æ•ˆçš„åˆç†çš„å®ç°åˆ†é¡µäº†ï¼Œå¦åˆ™å¯èƒ½å¡æ­»ä½ çš„æœåŠ¡å™¨å“¦ã€‚PERCONA PERFORMANCE CONFERENCE 2009ä¸Šï¼Œæ¥è‡ªé›…è™çš„å‡ ä½å·¥ç¨‹å¸ˆå¸¦æ¥äº†ä¸€ç¯‡â€EfficientPagination Using MySQLâ€çš„æŠ¥å‘Š: 
limit10000,20çš„æ„æ€æ‰«ææ»¡è¶³æ¡ä»¶çš„10020è¡Œï¼Œæ‰”æ‰å‰é¢çš„10000è¡Œï¼Œè¿”å›æœ€åçš„20è¡Œï¼Œé—®é¢˜å°±åœ¨è¿™é‡Œã€‚
###(1)æ—¥å¸¸åˆ†é¡µSQLè¯­å¥
select id,name,content from users order by id asc limit 100000,20
æ‰«æ100020è¡Œ
###(2)å¦‚æœè®°å½•äº†ä¸Šæ¬¡çš„æœ€å¤§ID
select id,name,content from users where id>100073 order by id asc limit 20
æ‰«æ20è¡Œã€‚
###(3)å¦‚æœidæ˜¯è¿ç»­çš„ï¼š
SELECT * FROM table WHERE id >= (SELECT id FROM table LIMIT 1000000, 1) LIMIT 10;
###(4)ç»ˆæä¼˜åŒ–:å¦‚æœéœ€è¦æŸ¥è¯¢ id ä¸æ˜¯è¿ç»­çš„ä¸€æ®µï¼Œæœ€ä½³çš„æ–¹æ³•å°±æ˜¯å…ˆæ‰¾å‡º id ï¼Œç„¶åç”¨ in æŸ¥è¯¢
-  1 å…ˆæ‰¾å‡ºidï¼Œé€šè¿‡å»ºç«‹search(vtype,id) è¿™æ ·çš„ç´¢å¼•
select id from collect where vtype=1 limit 90000,10; éå¸¸å¿«ï¼0.04ç§’å®Œæˆï¼
-  2 ç„¶ååœ¨ SELECT * FROM table WHERE id IN(10000, 100000, 1000000...);

## Index Condition Pushdownï¼ˆICPï¼‰ ä¼˜åŒ–
- Mysqlæ•°æ®åº“ä¼šåœ¨å–å‡ºç´¢å¼•çš„åŒæ—¶ï¼Œåˆ¤æ–­æ˜¯å¦å¯ä»¥è¿›è¡Œwhereæ¡ä»¶çš„è¿‡æ»¤ï¼Œä¹Ÿå°±æ˜¯å°†Whereæ¡ä»¶çš„éƒ¨åˆ†è¿‡æ»¤æ“ä½œæ”¾åœ¨äº†å­˜å‚¨å¼•æ“å±‚ã€‚
è¿™æ ·å‡å°‘äº†ä¸Šå±‚SQlå±‚å¯¹è®°å½•çš„ç´¢å–ï¼Œä»è€Œæé«˜äº†æ•°æ®åº“çš„æ•´ä½“æ€§èƒ½.
- **explain çš„Extraå­—æ®µå¯ä»¥çœ‹åˆ° Using index conditionã€**



# mysqlï¼š
å¯é‡å¤è¯»éš”ç¦»çº§åˆ«ä¸‹ï¼šå¢åˆ æ”¹æŸ¥ï¼šå…¶ä¸­å“ªäº›ä¼šç”¨åˆ°ä»€ä¹ˆé”ï¼Ÿ
1 æŸ¥è¯¢ï¼ˆselectï¼‰ï¼šè¯»å–ä¸ä¼šå ç”¨å’Œç­‰å¾…è¡¨ä¸Šçš„é”ï¼Œé™¤éåŠ select ã€‚ã€‚ã€‚ for updateï¼ˆå¼ºåˆ¶æ€§åŠ é”ï¼Œé—´éš™é” ï¼ˆã€‘ï¼‰
2 æ›´æ–°ï¼ˆupdate set...ï¼‰:
UPDATE accounts SET level = 100 WHERE id = 5;   å¦‚æœæ˜¯å”¯ä¸€ç´¢å¼•ï¼Œé‚£ä¹ˆä¼šåŠ å¯¹åº”çš„â€œè¡Œé”â€
UPDATE accounts SET level = 100 WHERE a = 5;   å¦‚æœæ˜¯è¾…åŠ©ç´¢å¼•ï¼Œé‚£ä¹ˆè®°å½•é”ä¸ä»…ä¼šåŠ åœ¨è¿™ä¸ªäºŒçº§ç´¢å¼•ä¸Šï¼Œè¿˜ä¼šåŠ åœ¨è¿™ä¸ªäºŒçº§ç´¢å¼•æ‰€å¯¹åº”çš„èšç°‡ç´¢å¼•ä¸Šã€‚ å¦‚ a = 5 çš„idæœ‰ 1 2 3 4 è¿™äº›è®°å½•éƒ½ä¼šåŠ è¡Œé”ã€‚
3 æ’å…¥ï¼ˆinsert intoï¼‰
delect insert updateåŠ çš„é”è¦çœ‹åŒ¹é…çš„åˆ—æ˜¯ä¸æ˜¯æœ‰ç´¢å¼•å†³å®šæ˜¯ä¸æ˜¯é”è¡¨ï¼Œä¸ä¸€å®šæ˜¯è¡Œé”

1 MVCCï¼šå¤šç‰ˆæœ¬å¹¶å‘æ§åˆ¶
ä¸‹é¢ä¸¤ä¸ªé‡‡ç”¨çš„éƒ½æ˜¯éé”å®šçš„ä¸€è‡´æ€§è¯»æ“ä½œï¼Œä¸ä¼šç­‰å¾…delete æˆ–è€… updateé”é‡Šæ”¾ï¼Œä¼šè¯»å–ä¸€ä¸ªå¿«ç…§æ•°æ®ã€‚ä¸‹é¢å¯¹äºå¿«ç…§æ•°æ®çš„å®šä¹‰ä¹Ÿæ˜¯ä¸åŒçš„
Read Commitedï¼š æ€»æ˜¯è¯»å–è¡Œçš„æœ€æ–°ç‰ˆæœ¬ï¼ˆæäº¤ä¹‹åçš„æœ€æ–°æ•°æ®ï¼‰ï¼Œæ‰€ä»¥è¿åäº†äº‹åŠ¡ACIDä¸­çš„ï¼Œéš”ç¦»æ€§ï¼ˆäº‹åŠ¡ä¹‹é—´çš„å¤„ç†éƒ½æ˜¯éš”ç¦»çš„ï¼‰
Repeatable readï¼šæ€»æ˜¯è¯»å–äº‹åŠ¡å¼€å§‹æ—¶çš„è¡Œæ•°æ®

Serialziableï¼šå¿«ç…§è¯»çš„å‰ææ˜¯éš”ç¦»çº§åˆ«ä¸æ˜¯ä¸²è¡Œçº§åˆ«ï¼Œä¸²è¡Œçº§åˆ«ä¸‹çš„å¿«ç…§è¯»ä¼šé€€åŒ–æˆå½“å‰è¯»
- ä¹‹æ‰€ä»¥å‡ºç°å¿«ç…§è¯»çš„æƒ…å†µï¼Œæ˜¯åŸºäºæé«˜å¹¶å‘æ€§èƒ½çš„è€ƒè™‘ï¼Œå¿«ç…§è¯»çš„å®ç°æ˜¯åŸºäºå¤šç‰ˆæœ¬å¹¶å‘æ§åˆ¶ï¼Œå³MVCC,å¯ä»¥è®¤ä¸ºMVCCæ˜¯è¡Œé”çš„ä¸€ä¸ªå˜ç§ï¼Œ
ä½†å®ƒåœ¨å¾ˆå¤šæƒ…å†µä¸‹ï¼Œé¿å…äº†åŠ é”æ“ä½œï¼Œé™ä½äº†å¼€é”€ï¼›æ—¢ç„¶æ˜¯åŸºäºå¤šç‰ˆæœ¬ï¼Œå³å¿«ç…§è¯»å¯èƒ½è¯»åˆ°çš„å¹¶ä¸ä¸€å®šæ˜¯æ•°æ®çš„æœ€æ–°ç‰ˆæœ¬ï¼Œè€Œæœ‰å¯èƒ½æ˜¯ä¹‹å‰çš„å†å²ç‰ˆæœ¬
- è¯´ç™½äº†MVCCå°±æ˜¯ä¸ºäº†å®ç°è¯»-å†™å†²çªä¸åŠ é”ï¼Œè€Œè¿™ä¸ªè¯»æŒ‡çš„å°±æ˜¯å¿«ç…§è¯», è€Œéå½“å‰è¯»ï¼Œå½“å‰è¯»å®é™…ä¸Šæ˜¯ä¸€ç§åŠ é”çš„æ“ä½œï¼Œæ˜¯**æ‚²è§‚é”**çš„å®ç° 

- æ€»ä¹‹åœ¨RCéš”ç¦»çº§åˆ«ä¸‹ï¼Œæ˜¯æ¯ä¸ªå¿«ç…§è¯»éƒ½ä¼šç”Ÿæˆå¹¶è·å–æœ€æ–°çš„Read Viewï¼›
è€Œåœ¨RRéš”ç¦»çº§åˆ«ä¸‹ï¼Œåˆ™æ˜¯åŒä¸€ä¸ªäº‹åŠ¡ä¸­çš„ç¬¬ä¸€ä¸ªå¿«ç…§è¯»æ‰ä¼šåˆ›å»ºRead View, ä¹‹åçš„å¿«ç…§è¯»è·å–çš„éƒ½æ˜¯åŒä¸€ä¸ªRead Viewã€‚
  
 

2 å¯¹äºéé”å®šçš„ä¸€è‡´æ€§è¯»æ“ä½œï¼Œå°±ç®—æ˜¯åŠ äº†ç‹¬å é”select ã€‚ã€‚ã€‚ for updateï¼Œä¹Ÿæ˜¯å¯ä»¥è¿›è¡Œè¯»å–çš„ã€‚

3 é—´éš™é”(å·¦å¼€ï¼Œå³å¼€)ï¼Œnext-key-lockï¼ˆé”å®šèŒƒå›´åŒ…æ‹¬è®°å½•æœ¬èº«ï¼Œå·¦å¼€å³æ¯•ï¼‰å¿…é¡»åœ¨Repeatable Readçº§åˆ«ä¸‹æ‰ç”Ÿæ•ˆï¼š  idï¼š 1  2  5  6   a: 1 1 3 6
3.1 å”¯ä¸€ç´¢å¼•ã€‚ä¸»é”®ç´¢å¼•ï¼šwhere id = 5ï¼Œä¼šé”å®šã€‚id = 5 çš„ è¿™æ¡è®°å½•
3.2 å‰¯ä¸»ç´¢å¼•ï¼šselect * from table where b=3 for update ä¼šæ ¹æ®next-key-locké”å®šèŒƒå›´ (1,3]ï¼Œç‰¹åˆ«æ³¨æ„çš„æ˜¯ï¼Œinnodbå¼•æ“è¿˜ä¼šå¯¹è¾…åŠ©ç´¢å¼•çš„ä¸‹ä¸€ä¸ªå‡å€¼åŠ ä¸Š gap lockï¼Œå³è¾…åŠ©ç´¢å¼•çš„èŒƒå›´(3,6)ä¹Ÿä¼šè¢«é”å®š

4 LOCK_AUTO_INCï¼šè‡ªå¢é”ï¼Œä¸€ç§ç‰¹æ®Šçš„è¡¨é”ï¼Œè‡ªå¢å€¼å¿…é¡»æ˜¯ç´¢å¼•ï¼ŒåŒäº‹å¿…é¡»æ˜¯ç´¢å¼•çš„ç¬¬ä¸€ä¸ªåˆ—ã€‚ insert into æ—¶ä¼šåŠ è¡¨é”


æœ€å·¦å‰ç¼€ï¼šmysql ä¼šä¸€ç›´å‘å³åŒ¹é…ç›´åˆ°é‡åˆ°èŒƒå›´æŸ¥è¯¢ï¼ˆ>ã€<ã€betweenã€likeï¼‰å°±åœæ­¢åŒ¹é…ã€‚èŒƒå›´åˆ—å¯ä»¥ç”¨åˆ°ç´¢å¼•ï¼Œä½†æ˜¯èŒƒå›´åˆ—åé¢çš„åˆ—æ— æ³•ç”¨åˆ°ç´¢å¼•ã€‚
- å½“ä½¿ç”¨abcä¼šå®Œå…¨ä½¿ç”¨è”åˆç´¢å¼•çš„abcä¸‰åˆ—ï¼Œä½¿ç”¨abåªä¼šä½¿ç”¨è”åˆç´¢å¼•ä¸­çš„ä¸¤åˆ—ï¼Œä½¿ç”¨aæˆ–è€…acåªä¼šä½¿ç”¨è”åˆç´¢å¼•ä¸­çš„aåˆ—ï¼Œè‡³äºå…¶ä»–æƒ…å†µè”åˆç´¢å¼•ä¸ä¼šè¢«ä½¿ç”¨


è¦†ç›–ç´¢å¼•ï¼š
- å°±æ˜¯selectçš„æ•°æ®åˆ—åªç”¨ä»ç´¢å¼•ä¸­å°±èƒ½å¤Ÿå–å¾—ï¼Œä¸å¿…ä»æ•°æ®è¡¨ä¸­è¯»å–ï¼Œæ¢å¥è¯è¯´æŸ¥è¯¢åˆ—è¦è¢«æ‰€ä½¿ç”¨çš„ç´¢å¼•è¦†ç›–ã€‚
- 
d å»ºç«‹äº†ä¸€ä¸ªç´¢å¼•
explain select d from cyb_test where d like '%1'  å¯ä»¥ä½¿ç”¨åˆ°dç´¢å¼•

a = X and b>xx and c= XX
select a from table  where a like %XXX;



# B+æ•°ä¸€å±‚å¯ä»¥æœ‰å¤šå°‘æ•°æ®
- 1 æ¯é¡µå­˜å‚¨çš„æ•°æ®é‡æ˜¯16K mysqlé»˜è®¤ä¸”å¯ä»¥ä¿®æ”¹
- 2 å‘½ä»¤ ï¼š show VARIABLES like 'innodb_page_size%';
mysql> show VARIABLES like 'innodb_page_size%';
+------------------+-------+
| Variable_name    | Value |
+------------------+-------+
| innodb_page_size | 16384 |
+------------------+-------+
1 row in set (0.02 sec)
16384/1024=16k
5.ä»¥bigInt ä¸¾ä¾‹å­ å®ƒæ˜¯8ä¸ªå­—èŠ‚ ä¸€ä¸ªæŒ‡é’ˆæ˜¯6ä¸ªå­—èŠ‚ï¼ˆä¸è¦é—®ä¸ºä»€ä¹ˆï¼Œä½ å°±ä¿¡äº†å§ï¼‰bigIntæ˜¯mysql å­—æ®µç±»å‹ä¹‹ä¸€
6.å¦‚ å›¾1-1 å’±ä»¬æ¥è®¡ç®—ä¸€ä¸‹ ç¬¬ä¸€é¡µæœ‰å¤šå°‘æŒ‡å‘ç¬¬äºŒå±‚çš„æŒ‡é’ˆï¼ˆç¬¬ä¸€é¡µå’Œç¬¬äºŒé¡µåªå­˜äº†ç´¢å¼•å’ŒæŒ‡å‘ä¸‹ä¸€çº§çš„æŒ‡é’ˆï¼‰
7.**16384/ï¼ˆ6+8ï¼‰â‰ˆ 1170**
8.æ¯ä¸€ä¸ªæŒ‡é’ˆéƒ½æ˜¯ä¸€ä¸ªé¡µï¼Œé‚£ä¹ˆç¬¬äºŒå±‚æœ‰å¤šå°‘é¡µï¼Ÿç­”æ¡ˆæ˜¯1170ä¸ªé¡µï¼Œé‚£ä¹ˆæ¯ä¸ªé¡µæ˜¯ä¸ ä¹Ÿæœ‰1170ä¸ªæŒ‡é’ˆæŒ‡å‘ç¬¬ä¸‰å±‚ï¼Œé‚£ä¹ˆç¬¬äºŒå±‚æœ‰å¤šå°‘æŒ‡é’ˆäº†ï¼Ÿ1170*1170 = 1368900
9.ç¬¬ä¸‰å±‚æ˜¯å­˜æ•°æ®çš„ï¼Œé‚£ä¹ˆä»–èƒ½å­˜å¤šå°‘æ¡æ•°æ®å‘¢ï¼Ÿ
10.æ¯ä¸€ä¸ªé¡µå’±ä»¬ä¹‹å‰è¯´äº†ä»–èƒ½å­˜16kå¤§å°çš„æ•°æ®ï¼Œè€Œæ¯ä¸€æ¡æ•°æ®å¤§æ¦‚æ˜¯ 1k æˆ‘ä»¬å°±æŒ‰ 1k ç®—ï¼Œç¬¬äºŒå±‚æœ‰1368900ä¸ªæŒ‡é’ˆæŒ‡å‘ç¬¬ä¸‰å±‚ï¼Œä¹Ÿå°±æ˜¯è¯´ç¬¬ä¸‰å±‚æœ‰1368900ä¸ªé¡µï¼Œæ¯ä¸€é¡µå¯ä»¥å­˜16æ¡æ•°æ®ï¼Œé‚£ä¹ˆç¬¬ä¸‰å±‚å¯ä»¥å­˜16*1368900 =21902400
ä¸¤åƒä¸€ç™¾ä¹åå¤šä¸‡æ¡æ•°æ®ã€‚
æ³¨æ„ï¼šB+æ ‘åªåœ¨æœ€ä¸‹å­˜å‚¨æ•°æ®

ç»“è®ºï¼šé«˜åº¦ä¸º3çš„b+æ ‘å¯ä»¥å­˜å‚¨2kwæ¡æ•°æ®


# åˆ¤æ–­ä¸€ä¸ªå­—æ®µæ˜¯å¦é€‚åˆæ·»åŠ ç´¢å¼•çš„æ–¹æ³•
mysql> show index from test_fuzhu;
+------------+------------+----------+--------------+-------------+-----------+-------------+----------+--------+------+------------+---------+---------------+---------+------------+
| Table      | Non_unique | Key_name | Seq_in_index | Column_name | Collation | Cardinality | Sub_part | Packed | Null | Index_type | Comment | Index_comment | Visible | Expression |
+------------+------------+----------+--------------+-------------+-----------+-------------+----------+--------+------+------------+---------+---------------+---------+------------+
| test_fuzhu |          0 | PRIMARY  |            1 | id          | A         |           7 |     NULL |   NULL |      | BTREE      |         |               | YES     | NULL       |
| test_fuzhu |          1 | b        |            1 | b           | A         |           4 |     NULL |   NULL | YES  | BTREE      |         |               | YES     | NULL       |
+------------+------------+----------+--------------+-------------+-----------+-------------+----------+--------+------+------------+---------+---------------+---------+------------+
2 rows in set (0.02 sec)

- æŸ¥çœ‹Cardinalityï¼ˆåŸºæ•°ï¼‰çš„å€¼ï¼Œmysqlé€šè¿‡**éšæœºé‡‡æ ·**çš„æ–¹å¼æ¥å¾—åˆ°ä¸€ä¸ª "ç´¢å¼•ä¸­ä¸é‡å¤è®°å½•æ•°é‡çš„é¢„ä¼°å€¼", 
æ‰€ä»¥Cardinalityè¶Šæ¥è¿‘æ•°æ®è¡¨çš„æ€»æ•°æ®æ•°æ—¶ï¼Œè¡¨æ˜è¿™ä¸ªå­—æ®µè¶Šé€‚åˆåŠ ç´¢å¼•ã€‚

- ä¸€èˆ¬ç»éªŒè¡¨æ˜ï¼šå¯¹äºæ€§åˆ«ã€åœ°åŒºã€ç±»å‹ã€ä»–ä»¬å–å€¼çš„èŒƒå›´å¾ˆå°ï¼Œç§°ä¸º**ä½é€‰æ‹©æ€§** ï¼Œå°½é‡ä¸å»ä½¿ç”¨ç´¢å¼•

- mysql analyze tableã€show table statusã€show indexä¼šå¯¼è‡´innodbå¼•æ“å»**é‡æ–°è®¡ç®—ç´¢å¼•çš„Cardinalityçš„å€¼**ã€‚å¦‚æœæ•°æ®é‡å·¨å¤§ï¼Œå¹¶ä¸”è¡¨ä¸­å­˜åœ¨
å¤§é‡çš„**è¾…åŠ©ç´¢å¼•**æ—¶ï¼Œæ‰§è¡Œæ“ä½œå¯èƒ½ä¼šéå¸¸çš„æ…¢ã€‚

